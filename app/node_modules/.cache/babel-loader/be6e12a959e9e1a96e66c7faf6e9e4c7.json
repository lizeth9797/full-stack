{"ast":null,"code":"var _jsxFileName = \"/home/karina/bedu/System-Rentail/app/src/components/CardDetails/CardDetails.jsx\",\n    _s = $RefreshSig$();\n\nimport * as React from 'react';\nimport ToggleButton from '@mui/material/ToggleButton';\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\nimport Button from '@mui/material/Button';\nimport Stack from '@mui/material/Stack';\nimport Snackbar from '@mui/material/Snackbar';\nimport MuiAlert from '@mui/material/Alert';\nimport SimpleBackdrop from '../utils/SimpleBackdrop/SimpleBackdrop';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Alert = /*#__PURE__*/React.forwardRef(_c = function Alert(props, ref) {\n  return /*#__PURE__*/_jsxDEV(MuiAlert, {\n    elevation: 6,\n    ref: ref,\n    variant: \"filled\",\n    ...props\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 11,\n    columnNumber: 12\n  }, this);\n});\n_c2 = Alert;\nexport default function CardDetails(props) {\n  _s();\n\n  const [view, setView] = React.useState(null);\n  const [loading, setLoading] = React.useState(null);\n  const [selectOption, setSelectOption] = React.useState(null);\n  const [msg, setMsg] = React.useState({\n    status: \"success\",\n    message: \"Solcitud enviada con Exito!\"\n  });\n  let request = {};\n\n  const sendRequest = async () => {\n    try {\n      const objRequest = {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": \"Bearer \" + JSON.parse(localStorage.getItem('user')).token\n        },\n        body: JSON.stringify(request)\n      };\n      await fetch(\"https://system-rentail-api.herokuapp.com/rental-requests\", objRequest);\n      setMsg({\n        status: \"success\",\n        message: \"Solcitud enviada con Exito!\"\n      });\n      restForm();\n      setOpen(true);\n      setLoading(false);\n      setTimeout(() => {\n        window.location.href = \"/user/panel-requests\";\n      }, 1000);\n    } catch (e) {\n      setOpen(true);\n      setMsg({\n        status: \"error\",\n        message: \"El envio de la solcitud Fallo!\"\n      });\n    }\n  };\n\n  const handleChange = (event, nextView) => {\n    event.preventDefault();\n    setView(nextView);\n    setSelectOption(event.target.value);\n  };\n\n  const restForm = () => {\n    setView(null);\n    setSelectOption(null);\n    request = {};\n  };\n\n  const handleClick = async event => {\n    event.preventDefault();\n\n    if (JSON.parse(localStorage.getItem('user'))) {\n      if (props.publication[0].periods[selectOption]) {\n        request = {\n          \"id_lessor\": props.publication[0].lessor[0]._id,\n          \"id_lessee\": JSON.parse(localStorage.getItem('user')).id,\n          \"id_publication\": props.publication[0]._id,\n          \"contract\": {\n            \"price\": props.publication[0].prices[selectOption],\n            \"period\": props.publication[0].periods[selectOption]\n          }\n        };\n        setLoading(true);\n        setTimeout(() => {\n          sendRequest();\n        }, 1000);\n      }\n    } else {\n      setOpen(true);\n      setLoading(true);\n      setMsg({\n        status: \"warning\",\n        message: \"Es necesario tener una cuenta para rentar\"\n      });\n      setTimeout(() => {\n        setLoading(false);\n        window.location.href = \"/user/login\";\n      }, 1500);\n    }\n  };\n\n  const [open, setOpen] = React.useState(false);\n\n  const handleCloseAlert = (event, reason) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n\n    setOpen(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [loading ? /*#__PURE__*/_jsxDEV(SimpleBackdrop, {\n      loading: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 20\n    }, this) : null, /*#__PURE__*/_jsxDEV(Stack, {\n      spacing: 2,\n      children: /*#__PURE__*/_jsxDEV(Snackbar, {\n        open: open,\n        autoHideDuration: 6000,\n        onClose: handleCloseAlert,\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          onClose: handleCloseAlert,\n          severity: msg.status,\n          sx: {\n            width: '100%'\n          },\n          children: msg.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"box-img\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: props.publication[0].title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: props.publication[0].product[0].image,\n        alt: props.publication[0].title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"details-primary\",\n      children: /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"box-details\",\n        children: [/*#__PURE__*/_jsxDEV(\"article\", {\n          className: \"details-secundary\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [props.publication[0].amount, \" Existencias - Producto Disponible\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Datos de Arrendador\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Nombre: \", props.publication[0].lessor[0].firstname, \" \", props.publication[0].lessor[0].lastname]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Ubicacion: \", props.publication[0].location]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Detalles del Producto\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Producto: \", props.publication[0].product[0].name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Descripcion: \", props.publication[0].product[0].description]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Categoria: \", props.publication[0].category[0].name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"actions-box\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Envia una solicitud de Renta\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            className: \"form-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Selecciona una opcion\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(ToggleButtonGroup, {\n              orientation: \"vertical\",\n              value: view,\n              exclusive: true,\n              onChange: handleChange,\n              children: [props.publication[0].prices.map((price, index) => {\n                if (props.publication[0].product[0].id_lessor !== JSON.parse(localStorage.getItem('user')).id) {\n                  return /*#__PURE__*/_jsxDEV(ToggleButton, {\n                    style: {\n                      fontSize: '0.8em'\n                    },\n                    value: index,\n                    children: [props.publication[0].periods[index], \" dias por: $ \", price]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 137,\n                    columnNumber: 36\n                  }, this);\n                }\n              }), \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 25\n            }, this), props.publication[0].product[0].id_lessor === JSON.parse(localStorage.getItem('user')).id ? /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                cursor: 'help ',\n                color: \"#505050\",\n                fontSize: '0.9em'\n              },\n              children: \"Esta es tu Publicaci\\xF3n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 115\n            }, this) : /*#__PURE__*/_jsxDEV(Button, {\n              style: {\n                marginTop: '5%',\n                width: '70%',\n                backgroundColor: '#153E90'\n              },\n              variant: \"contained\",\n              id: \"demo-simple-select\",\n              onClick: handleClick,\n              children: \"Enviar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 211\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(CardDetails, \"k/OdjjGm3E4iIsSY8Au3BAxmnfU=\");\n\n_c3 = CardDetails;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Alert$React.forwardRef\");\n$RefreshReg$(_c2, \"Alert\");\n$RefreshReg$(_c3, \"CardDetails\");","map":{"version":3,"sources":["/home/karina/bedu/System-Rentail/app/src/components/CardDetails/CardDetails.jsx"],"names":["React","ToggleButton","ToggleButtonGroup","Button","Stack","Snackbar","MuiAlert","SimpleBackdrop","Alert","forwardRef","props","ref","CardDetails","view","setView","useState","loading","setLoading","selectOption","setSelectOption","msg","setMsg","status","message","request","sendRequest","objRequest","method","headers","JSON","parse","localStorage","getItem","token","body","stringify","fetch","restForm","setOpen","setTimeout","window","location","href","e","handleChange","event","nextView","preventDefault","target","value","handleClick","publication","periods","lessor","_id","id","prices","open","handleCloseAlert","reason","width","title","product","image","amount","firstname","lastname","name","description","category","map","price","index","id_lessor","fontSize","cursor","color","marginTop","backgroundColor"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport ToggleButton from '@mui/material/ToggleButton';\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\nimport Button from '@mui/material/Button';\nimport Stack from '@mui/material/Stack';\nimport Snackbar from '@mui/material/Snackbar';\nimport MuiAlert from '@mui/material/Alert';\nimport SimpleBackdrop from '../utils/SimpleBackdrop/SimpleBackdrop'\n\nconst Alert = React.forwardRef(function Alert(props, ref) {\n    return <MuiAlert elevation={6} ref={ref} variant=\"filled\" {...props} />;\n  });\n\nexport default function CardDetails(props) {\n\n    const [view, setView] = React.useState(null);\n    const [loading, setLoading ] = React.useState(null);\n    const [selectOption, setSelectOption] = React.useState(null)\n    const [msg, setMsg] = React.useState({status: \"success\", message: \"Solcitud enviada con Exito!\"})\n\n    let request = {}\n\n    const sendRequest = async () => {\n    try {\n        const objRequest = {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\", \"Authorization\": \"Bearer \" + JSON.parse(localStorage.getItem('user')).token },\n                body: JSON.stringify(request)\n        }\n            await fetch(\"https://system-rentail-api.herokuapp.com/rental-requests\", objRequest)\n            setMsg({status: \"success\", message: \"Solcitud enviada con Exito!\"})\n            restForm()\n            setOpen(true);\n            setLoading(false)\n            setTimeout(() => {\n                window.location.href = \"/user/panel-requests\"\n            }, 1000)\n\n    } catch (e) {\n        setOpen(true);\n        setMsg({status: \"error\", message: \"El envio de la solcitud Fallo!\"})\n    }\n}\n\n    const handleChange = (event, nextView) => {\n        event.preventDefault();\n        setView(nextView);\n        setSelectOption(event.target.value)    \n      }\n\n    const restForm = () => {\n        setView(null);\n        setSelectOption(null);\n        request = {}\n    }\n\n    const handleClick = async (event) => {\n        event.preventDefault();\n\n        if (JSON.parse(localStorage.getItem('user'))) {\n            if(props.publication[0].periods[selectOption]) {\n                request = {\n                    \"id_lessor\": props.publication[0].lessor[0]._id,\n                    \"id_lessee\": JSON.parse(localStorage.getItem('user')).id,\n                    \"id_publication\": props.publication[0]._id,\n                    \"contract\": {\n                        \"price\": props.publication[0].prices[selectOption],\n                        \"period\": props.publication[0].periods[selectOption]\n                    }\n                }\n                setLoading(true)\n                setTimeout(() => {\n                    sendRequest()\n                }, 1000);\n            } \n        } else {\n            setOpen(true);\n            setLoading(true)\n            setMsg({status: \"warning\", message: \"Es necesario tener una cuenta para rentar\"})\n            setTimeout(() => {\n                setLoading(false)\n                window.location.href = \"/user/login\"\n            }, 1500);\n        }\n    }\n\n    const [open, setOpen] = React.useState(false);\n  \n    const handleCloseAlert = (event, reason) => {\n      if (reason === 'clickaway') {\n        return;\n      }\n  \n      setOpen(false);\n    };\n\n    return (\n        <>\n        {loading ? <SimpleBackdrop loading={true} />: null}\n        <Stack spacing={2}>\n          <Snackbar open={open} autoHideDuration={6000} onClose={handleCloseAlert}>\n            <Alert onClose={handleCloseAlert} severity={msg.status} sx={{ width: '100%' }}>\n              {msg.message}\n            </Alert>\n          </Snackbar>\n        </Stack>\n        <div className=\"box-img\">\n                <header>\n                    <h2>{props.publication[0].title}</h2>\n                </header>\n                <img src={props.publication[0].product[0].image} alt={props.publication[0].title} />\n            </div>\n            <div className=\"details-primary\">\n                <section className=\"box-details\">\n                    <article className=\"details-secundary\">\n                    <h2>{props.publication[0].amount} Existencias - Producto Disponible</h2>\n                        <h3>Datos de Arrendador</h3>\n                        <p>Nombre: {props.publication[0].lessor[0].firstname} {props.publication[0].lessor[0].lastname}</p>\n                        <p>Ubicacion: {props.publication[0].location}</p>\n                        <h3>Detalles del Producto</h3>\n                        <p>Producto: {props.publication[0].product[0].name}</p>\n                        <p>Descripcion: {props.publication[0].product[0].description}</p>\n                        <p>Categoria: {props.publication[0].category[0].name}</p>\n                    </article>\n                    <section className=\"actions-box\">\n                    <h3>Envia una solicitud de Renta</h3>\n                    <form className=\"form-actions\">\n                    <p>Selecciona una opcion</p>\n                        <ToggleButtonGroup\n                    orientation=\"vertical\"\n                    value={view}\n                    exclusive\n                    onChange={handleChange}\n                    >\n                    {props.publication[0].prices.map((price, index) => {\n                        if ( props.publication[0].product[0].id_lessor !== JSON.parse(localStorage.getItem('user')).id ) {\n                            return <ToggleButton style={{ fontSize: '0.8em' }} value={index}>{props.publication[0].periods[index]} dias por: $ {price}</ToggleButton>\n                        }\n                        })\n                    })\n                    </ToggleButtonGroup>\n                    { props.publication[0].product[0].id_lessor === JSON.parse(localStorage.getItem('user')).id ? <p style={{ cursor:'help ', color: \"#505050\", fontSize: '0.9em' }}>Esta es tu Publicación</p> : <Button \n                    style={{marginTop: '5%', width:'70%', backgroundColor: '#153E90'}} \n                    variant=\"contained\"\n                    id=\"demo-simple-select\"\n                    onClick={handleClick}\n                    >Enviar</Button> }\n                    </form>\n                    </section>\n                </section>\n            </div>\n        </>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}