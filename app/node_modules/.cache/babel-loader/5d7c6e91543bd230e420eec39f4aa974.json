{"ast":null,"code":"var _jsxFileName = \"/home/karina/bedu/System-Rentail/app/src/components/PublicationsPanel/PublicationsPanel.jsx\",\n    _s = $RefreshSig$();\n\nimport * as React from 'react';\nimport Button from '@mui/material/Button';\nimport BasicTable from './utils/BasicTable';\nimport Snackbar from '@mui/material/Snackbar';\nimport Stack from '@mui/material/Stack';\nimport MuiAlert from '@mui/material/Alert';\nimport SimpleBackdrop from '../utils/SimpleBackdrop/SimpleBackdrop';\nimport ModalCreate from \"./utils/ModalCreate/ModalCreate\";\nimport \"./publications-panel.sass\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Alert = /*#__PURE__*/React.forwardRef(_c = function Alert(props, ref) {\n  return /*#__PURE__*/_jsxDEV(MuiAlert, {\n    elevation: 6,\n    ref: ref,\n    variant: \"filled\",\n    ...props\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 12,\n    columnNumber: 10\n  }, this);\n});\n_c2 = Alert;\nexport default function PublicationsPanel() {\n  _s();\n\n  const [publicationsData, setpublicationsData] = React.useState(null);\n  const [headerData, setHeaderData] = React.useState(null);\n  const [loading, setLoading] = React.useState(null);\n  const [msg, setMsg] = React.useState({\n    status: \"success\",\n    message: \"Publicacion Creada con Exito!\"\n  });\n  React.useEffect(() => {\n    setLoading(true);\n\n    const getpublications = async url => {\n      try {\n        const config = {\n          \"Authorization\": \"Bearer \" + JSON.parse(localStorage.getItem('user')).token\n        };\n        const request = await fetch(url, {\n          headers: config\n        });\n        const jsonRequest = await request.json();\n        setpublicationsData(jsonRequest);\n        setHeaderData(Object.keys(jsonRequest[0]));\n        setLoading(false);\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    getpublications('https://system-rentail-api.herokuapp.com/publications?id_lessor=' + JSON.parse(localStorage.getItem('user')).id);\n  }, []);\n  console.log(publicationsData);\n  console.log(headerData);\n  const [openModal, setOpenModal] = React.useState(false);\n\n  const handleClickOpen = () => {\n    setOpenModal(true);\n  };\n\n  const [openAlert, setOpenAlert] = React.useState(false);\n\n  const handleCloseAlert = (event, reason) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n\n    setOpenAlert(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [loading ? /*#__PURE__*/_jsxDEV(SimpleBackdrop, {\n      loading: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 24\n    }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header-publications-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Mis Publicaciones\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"actions-publications-panel\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleClickOpen,\n          className: \"btn-publication-panel\",\n          variant: \"outlined\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"+\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 108\n          }, this), \" Nueva Publicacion \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"table-publications-panel\",\n      children: publicationsData !== null && headerData !== null ? /*#__PURE__*/_jsxDEV(BasicTable, {\n        publicationsData: publicationsData,\n        setLoading: setLoading,\n        headerData: headerData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 67\n      }, this) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), openModal ? /*#__PURE__*/_jsxDEV(ModalCreate, {\n      publicationsData: publicationsData,\n      setOpenAlert: setOpenAlert,\n      setLoading: setLoading,\n      openModal: openModal,\n      setOpenModal: setOpenModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 26\n    }, this) : null, /*#__PURE__*/_jsxDEV(Stack, {\n      spacing: 2,\n      children: /*#__PURE__*/_jsxDEV(Snackbar, {\n        open: openAlert,\n        autoHideDuration: 6000,\n        onClose: handleCloseAlert,\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          onClose: handleCloseAlert,\n          severity: msg.status,\n          sx: {\n            width: '100%'\n          },\n          children: msg.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(PublicationsPanel, \"LEPoMVV2Dcr8FsvvHozm78VQONc=\");\n\n_c3 = PublicationsPanel;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Alert$React.forwardRef\");\n$RefreshReg$(_c2, \"Alert\");\n$RefreshReg$(_c3, \"PublicationsPanel\");","map":{"version":3,"sources":["/home/karina/bedu/System-Rentail/app/src/components/PublicationsPanel/PublicationsPanel.jsx"],"names":["React","Button","BasicTable","Snackbar","Stack","MuiAlert","SimpleBackdrop","ModalCreate","Alert","forwardRef","props","ref","PublicationsPanel","publicationsData","setpublicationsData","useState","headerData","setHeaderData","loading","setLoading","msg","setMsg","status","message","useEffect","getpublications","url","config","JSON","parse","localStorage","getItem","token","request","fetch","headers","jsonRequest","json","Object","keys","e","console","log","id","openModal","setOpenModal","handleClickOpen","openAlert","setOpenAlert","handleCloseAlert","event","reason","width"],"mappings":";;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,UAAP,MAAuB,oBAAvB;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,OAAOC,KAAP,MAAkB,qBAAlB;AACA,OAAOC,QAAP,MAAqB,qBAArB;AACA,OAAOC,cAAP,MAA2B,wCAA3B;AACA,OAAOC,WAAP,MAAwB,iCAAxB;AACA,OAAO,2BAAP;;;AAEA,MAAMC,KAAK,gBAAGR,KAAK,CAACS,UAAN,MAAiB,SAASD,KAAT,CAAeE,KAAf,EAAsBC,GAAtB,EAA2B;AACxD,sBAAO,QAAC,QAAD;AAAU,IAAA,SAAS,EAAE,CAArB;AAAwB,IAAA,GAAG,EAAEA,GAA7B;AAAkC,IAAA,OAAO,EAAC,QAA1C;AAAA,OAAuDD;AAAvD;AAAA;AAAA;AAAA;AAAA,UAAP;AACD,CAFa,CAAd;MAAMF,K;AAIN,eAAe,SAASI,iBAAT,GAA4B;AAAA;;AAEvC,QAAM,CAAEC,gBAAF,EAAoBC,mBAApB,IAA4Cd,KAAK,CAACe,QAAN,CAAe,IAAf,CAAlD;AACA,QAAM,CAAEC,UAAF,EAAcC,aAAd,IAAgCjB,KAAK,CAACe,QAAN,CAAe,IAAf,CAAtC;AACA,QAAM,CAAEG,OAAF,EAAWC,UAAX,IAA0BnB,KAAK,CAACe,QAAN,CAAe,IAAf,CAAhC;AACA,QAAM,CAAEK,GAAF,EAAOC,MAAP,IAAkBrB,KAAK,CAACe,QAAN,CAAe;AAACO,IAAAA,MAAM,EAAE,SAAT;AAAoBC,IAAAA,OAAO,EAAE;AAA7B,GAAf,CAAxB;AAGAvB,EAAAA,KAAK,CAACwB,SAAN,CAAgB,MAAM;AAElBL,IAAAA,UAAU,CAAC,IAAD,CAAV;;AAEA,UAAMM,eAAe,GAAG,MAAOC,GAAP,IAAe;AACrC,UAAI;AACF,cAAMC,MAAM,GAAG;AACX,2BAAiB,YAAYC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,EAAyCC;AAD3D,SAAf;AAIA,cAAMC,OAAO,GAAG,MAAMC,KAAK,CAACR,GAAD,EAAM;AAC/BS,UAAAA,OAAO,EAAER;AADsB,SAAN,CAA3B;AAGE,cAAMS,WAAW,GAAG,MAAMH,OAAO,CAACI,IAAR,EAA1B;AACAvB,QAAAA,mBAAmB,CAACsB,WAAD,CAAnB;AACAnB,QAAAA,aAAa,CAACqB,MAAM,CAACC,IAAP,CAAYH,WAAW,CAAC,CAAD,CAAvB,CAAD,CAAb;AACAjB,QAAAA,UAAU,CAAC,KAAD,CAAV;AAED,OAbH,CAaI,OAAOqB,CAAP,EAAS;AACTC,QAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACD;AAAE,KAhBP;;AAkBIf,IAAAA,eAAe,CAAC,qEAAqEG,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,EAAyCY,EAA/G,CAAf;AAEH,GAxBL,EAwBM,EAxBN;AA0BIF,EAAAA,OAAO,CAACC,GAAR,CAAY7B,gBAAZ;AACA4B,EAAAA,OAAO,CAACC,GAAR,CAAY1B,UAAZ;AAEA,QAAM,CAAC4B,SAAD,EAAYC,YAAZ,IAA4B7C,KAAK,CAACe,QAAN,CAAe,KAAf,CAAlC;;AAEA,QAAM+B,eAAe,GAAG,MAAM;AAC1BD,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACH,GAFD;;AAIA,QAAM,CAACE,SAAD,EAAYC,YAAZ,IAA4BhD,KAAK,CAACe,QAAN,CAAe,KAAf,CAAlC;;AAEA,QAAMkC,gBAAgB,GAAG,CAACC,KAAD,EAAQC,MAAR,KAAmB;AAC1C,QAAIA,MAAM,KAAK,WAAf,EAA4B;AAC1B;AACD;;AAEDH,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACD,GAND;;AASJ,sBACI;AAAA,eACK9B,OAAO,gBAAG,QAAC,cAAD;AAAgB,MAAA,OAAO,EAAE;AAAzB;AAAA;AAAA;AAAA;AAAA,YAAH,GAAsC,IADlD,eAEI;AAAK,MAAA,SAAS,EAAC,2BAAf;AAAA,8BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAK,QAAA,SAAS,EAAC,4BAAf;AAAA,+BACI,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAE4B,eAAjB;AAAkC,UAAA,SAAS,EAAC,uBAA5C;AAAmE,UAAA,OAAO,EAAC,UAA3E;AAAA,uCAAuF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAvF;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ,eAQI;AAAK,MAAA,SAAS,EAAC,0BAAf;AAAA,gBACGjC,gBAAgB,KAAK,IAArB,IAA6BG,UAAU,KAAK,IAA5C,gBAAmD,QAAC,UAAD;AAAY,QAAA,gBAAgB,EAAEH,gBAA9B;AAAgD,QAAA,UAAU,EAAEM,UAA5D;AAAwE,QAAA,UAAU,EAAEH;AAApF;AAAA;AAAA;AAAA;AAAA,cAAnD,GAAwJ;AAD3J;AAAA;AAAA;AAAA;AAAA,YARJ,EAWK4B,SAAS,gBAAG,QAAC,WAAD;AAAa,MAAA,gBAAgB,EAAE/B,gBAA/B;AAAiD,MAAA,YAAY,EAAEmC,YAA/D;AAA6E,MAAA,UAAU,EAAE7B,UAAzF;AAAqG,MAAA,SAAS,EAAEyB,SAAhH;AAA2H,MAAA,YAAY,EAAEC;AAAzI;AAAA;AAAA;AAAA;AAAA,YAAH,GAA+J,IAX7K,eAYI,QAAC,KAAD;AAAO,MAAA,OAAO,EAAE,CAAhB;AAAA,6BACA,QAAC,QAAD;AAAU,QAAA,IAAI,EAAEE,SAAhB;AAA2B,QAAA,gBAAgB,EAAE,IAA7C;AAAmD,QAAA,OAAO,EAAEE,gBAA5D;AAAA,+BACE,QAAC,KAAD;AAAO,UAAA,OAAO,EAAEA,gBAAhB;AAAkC,UAAA,QAAQ,EAAE7B,GAAG,CAACE,MAAhD;AAAwD,UAAA,EAAE,EAAE;AAAE8B,YAAAA,KAAK,EAAE;AAAT,WAA5D;AAAA,oBACGhC,GAAG,CAACG;AADP;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,YAZJ;AAAA,kBADJ;AAsBH;;GA5EuBX,iB;;MAAAA,iB","sourcesContent":["import * as React from 'react';\nimport Button from '@mui/material/Button';\nimport BasicTable from './utils/BasicTable';\nimport Snackbar from '@mui/material/Snackbar';\nimport Stack from '@mui/material/Stack';\nimport MuiAlert from '@mui/material/Alert';\nimport SimpleBackdrop from '../utils/SimpleBackdrop/SimpleBackdrop'\nimport ModalCreate from \"./utils/ModalCreate/ModalCreate\"\nimport \"./publications-panel.sass\"\n\nconst Alert = React.forwardRef(function Alert(props, ref) {\n  return <MuiAlert elevation={6} ref={ref} variant=\"filled\" {...props} />;\n});\n\nexport default function PublicationsPanel(){\n\n    const [ publicationsData, setpublicationsData ] = React.useState(null)\n    const [ headerData, setHeaderData ] = React.useState(null)\n    const [ loading, setLoading ] = React.useState(null);\n    const [ msg, setMsg ] = React.useState({status: \"success\", message: \"Publicacion Creada con Exito!\"})\n    \n\n    React.useEffect(() => {\n\n        setLoading(true);\n\n        const getpublications = async (url) => {\n          try {\n            const config = {\n                \"Authorization\": \"Bearer \" + JSON.parse(localStorage.getItem('user')).token\n            }\n\n            const request = await fetch(url, {\n              headers: config\n            }) \n              const jsonRequest = await request.json() \n              setpublicationsData(jsonRequest)\n              setHeaderData(Object.keys(jsonRequest[0]))\n              setLoading(false)\n\n            } catch (e){ \n              console.log(e); \n            } } \n    \n            getpublications('https://system-rentail-api.herokuapp.com/publications?id_lessor=' + JSON.parse(localStorage.getItem('user')).id)\n    \n        },[]) \n\n        console.log(publicationsData);\n        console.log(headerData);\n\n        const [openModal, setOpenModal] = React.useState(false);\n\n        const handleClickOpen = () => {\n            setOpenModal(true);\n        };\n\n        const [openAlert, setOpenAlert] = React.useState(false);\n      \n        const handleCloseAlert = (event, reason) => {\n          if (reason === 'clickaway') {\n            return;\n          }\n      \n          setOpenAlert(false);\n        };\n      \n\n    return (\n        <>\n            {loading ? <SimpleBackdrop loading={true} />: null} \n            <div className=\"header-publications-panel\">\n                <h3>Mis Publicaciones</h3>\n                <div className=\"actions-publications-panel\">\n                    <Button onClick={handleClickOpen} className=\"btn-publication-panel\"variant=\"outlined\"> <strong>+</strong> Nueva Publicacion </Button>\n                </div>\n            </div>\n            <div className=\"table-publications-panel\">\n              {publicationsData !== null && headerData !== null ? <BasicTable publicationsData={publicationsData} setLoading={setLoading} headerData={headerData} /> : null}\n            </div> \n            {openModal ? <ModalCreate publicationsData={publicationsData} setOpenAlert={setOpenAlert} setLoading={setLoading} openModal={openModal} setOpenModal={setOpenModal} /> : null}\n            <Stack spacing={2}>\n            <Snackbar open={openAlert} autoHideDuration={6000} onClose={handleCloseAlert}>\n              <Alert onClose={handleCloseAlert} severity={msg.status} sx={{ width: '100%' }}>\n                {msg.message}\n              </Alert>\n            </Snackbar>\n            </Stack>\n        </>\n    )\n}"]},"metadata":{},"sourceType":"module"}